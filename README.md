# S1000D-PM-Viewer
Программа для просмотра модулей публикаций в формате S1000D (проектная работа на курсе "Spring Framework" Otus.ru)

## Сборка и установка

Чтобы собрать приложение, нужно запустить команду `mvn install` из директории проекта. 
В директории `target` должен появиться результирующий файл `s1000d-pm-viewer-0.0.1-SNAPSHOT.jar`. 

Приложение использует БД PostgreSQL.
По умолчанию приложение будет обращаться к базе данных `publications`, используя пользователя `springuser` с паролем `123`.
Чтобы перекрыть эти настройки, рядом с приложением нужно положить файл `application.properties` следующего содержания:

`spring.datasource.url=jdbc:postgresql:имя и путь к БД`

`spring.datasource.username=логин`

`spring.datasource.password=пароль`

Запускается приложение командой `java -jar s1000d-pm-viewer-0.0.1-SNAPSHOT.jar`. После чего оно доступно по порту `8080`.

## Загрузка публикаций

Чтобы загрузить публикацию, нужно зайти в систему с правами редактора. В этом случае в списке публикаций появится 
кнопка "Загрузить".

При первом запуске системы права редактора есть у предустановленных пользователей `editor` и `admin` 
(у обоих пароль `password`).

В качестве тестовых данных можно использовать xml-файл из папки `src/test/resources/data`. 
Ещё можно взять архив с публикациями по ссылке:  https://drive.google.com/open?id=1PDWMC-sJ0N43o-_7Pl_sxLjMwzKODIYt

Система не позволяет загрузить две публикации, у которых полностью совпадают код, язык и номер версии (содержимое элемента 
`pm/identAndStatusSection/pmAddress/pmIdent`).

## Просмотр публикаций

Данные загруженных публикаций отображаются на вкладке "Публикации". 
Они группируются по вложенным спискам - если загрузить несколько публикаций с одним кодом, но разными версиями, 
они будут сгруппированы вместе.  

Также можно нажать на кнопку "Просмотр" и увидеть содержимое - дерево из разделов и модулей данных. 
(К сожалению, мне не удалось сделать так, чтобы дерево разворачивалось по умолчанию, его пока нужно разворачивать вручную.)

## Работа с пользователями

При заходе в систему с правами администратора (есть у предустановленного пользователя `admin`), становится доступна 
вкладка "Пользователи". На ней можно добавлять и удалять пользователей, менять им роли и пароли.

## Права на просмотр

При заходе в систему с правами администратора на вкладке "Публикации" становятся доступными кнопки "Права на просмотр".
Публикацию могут видеть только те пользователи, которым открыт доступ (и все пользователи с правами администратора). 
При выборе пункта "Открыть доступ для всех", публикацию могут видеть даже пользователи, не вошедшие в систему.